# 网络综合实验平台 - 快速开始指南

> 📦 **重要提示**：本压缩包已包含所有项目依赖（node_modules目录），首次使用只需安装Node.js即可！

## 📖 文档导读（新老师必读）

### 第一次使用？按这个顺序看文档

**1. 当前文档（快速开始指南）** - 5分钟
   - ✅ 了解如何部署平台（一键启动）
   - ✅ 学生如何访问和提交作业
   - ✅ 如何批改作业和导出成绩

**2. 教师教学指南**（[docs/教师教学指南.md](docs/教师教学指南.md)）- 15分钟
   - 📚 3个教学场景设计（40分钟 / 80分钟 / 考试）
   - 📚 从零搭建完整网络的详细步骤
   - 📚 故障排查和教学技巧

**3. 学生操作手册**（[docs/学生操作手册.md](docs/学生操作手册.md)）- 让学生课前预习
   - 👨‍🎓 如何添加设备、连接设备
   - 👨‍🎓 如何配置路由表、DNS、Web服务
   - 👨‍🎓 如何使用测试工具验证

### 📌 快速答疑

| 问题 | 看哪个文档 | 章节 |
|------|----------|------|
| 如何启动平台？ | 当前文档 | [教师机部署](#-教师机部署必读) |
| 学生无法访问？ | 当前文档 | [常见问题Q1](#q1-学生无法访问) |
| 如何设计课程？ | 教师教学指南 | 第二章"教学场景设计" |
| 如何批改作业？ | 当前文档 | [作业查看](#-作业查看) |
| 学生不会操作？ | 学生操作手册 | 第一章"快速入门" |

**💡 建议**：第一次使用前，只需看完本文档即可部署和上课。详细教学设计可在课后参考教师教学指南。

---

## 📋 启动方式快速选择

| 启动方式 | 适合人群 | 优点 | 缺点 |
|---------|---------|------|------|
| **一键启动.bat** | 所有老师（推荐） | ✅ 中文界面友好<br>✅ 自动清理端口<br>✅ 显示详细提示 | ⚠️ 需要提前安装Node.js |
| **手动启动** | 技术老师 | ✅ 完全控制启动过程<br>✅ 便于排查问题 | ❌ 需要手动开两个终端 |

**💡 推荐**：普通老师使用 **一键启动.bat**，首次使用前只需安装Node.js即可（压缩包已包含依赖）

---

## 🚀 教师机部署（必读）

### ⭐ 方式一：一键启动（最简单，推荐）

**双击运行根目录的 `一键启动.bat` 脚本即可！**

脚本会自动：

1. ✅ 自动清理端口冲突（5173和3001）
2. ✅ 同时启动前后端服务
3. ✅ 显示访问地址和使用提示

**使用方法**：
```
双击 "一键启动.bat" → 等待启动完成 → 记下前端地址
```

**注意事项**：

- ⚠️ **首次使用前需要先安装Node.js**（安装包在 `node安装包` 目录）
- ✅ **压缩包已包含所有依赖**，无需运行 `npm install`
- ✅ 服务启动后会打开3个窗口：主窗口、前端服务、后端服务
- ✅ 前端服务窗口会显示 Network 地址，这是学生访问的地址
- ✅ 保持所有窗口打开，关闭即停止服务

---

### 📘 手动部署（可选）

如果一键启动失败，可以手动部署：

#### 第一步：安装Node.js（Windows系统）

**检查是否已安装**：

```bash
node -v
npm -v
```

如果显示版本号，说明已安装，可直接跳到"第二步"。

**安装Node.js**：

- 项目包含Node.js安装包：`node安装包\node-v24.11.1-x64.msi`
- 双击安装包，**确保勾选 "Add to PATH"**
- 安装完成后，重启命令提示符
- 验证：`node -v` 和 `npm -v`

**在线下载**（备选）：

- 访问官网：https://nodejs.org/
- 下载"LTS"版本的Windows安装包

> ✅ **提示**：压缩包已包含所有项目依赖（node_modules目录），无需运行 `npm install`

#### 第二步：启动服务

**需要同时运行两个服务**：

**终端1 - 前端服务（Vite）**：
```bash
npm run dev
```

启动成功后会显示：
```
➜  Local:   http://localhost:5173/
➜  Network: http://192.168.1.100:5173/
```

记下 **Network地址**（如 `192.168.1.100:5173`），这是学生访问的地址。

**终端2 - 后端服务（作业提交）**：
```bash
npm run server
```

启动成功后会显示：
```
============================================================
📚 网络综合实验平台 - 作业提交服务器
============================================================
🚀 服务器启动成功: http://localhost:3001
📁 作业保存目录: E:\备课\七年级上课\网络综合实验平台\submissions
💡 提示: 学生机需通过教师机IP访问
============================================================
```

### 第三步：学生机访问

学生打开浏览器，输入：
```
http://[教师机IP]:5173
例如：http://192.168.1.100:5173
```

---

## 📝 学生使用流程

1. **首次访问** - 自动显示欢迎引导（可跳过）
2. **搭建网络** - 添加设备、连接设备、配置路由表
3. **测试验证** - 使用连通测试、浏览器模拟器（DNS/HTTP）测试
4. **提交作业** - 点击右上角"📝 提交作业"按钮

### 📽️ 课堂演示技巧

- 需要放大画布时，点击拓扑区右上角的“⤢ 最大化画布”即可进入演示模式，适合投影给全班观看
- 在演示模式下，每台设备会自动显示核心配置（PC的DNS、DNS记录、路由器的LAN网段+路由表摘要、Web服务器端口等），讲解时无需频繁打开面板
- 退出演示模式只需点击右上角“退出最大化”

### 🧩 从零搭建示例（建议作为课堂脚本）

1. 规划设备：家庭A/B使用 192.168.1.0 / 192.168.2.0，企业区使用 10.2.0.0（Web1）与 10.1.0.0（Web2 + DNS）。
2. Shift+点击完成 PC → 路由器、Web/DNS → 企业路由器的连接，再依次连接 R1↔R2、R1↔R3、R2↔R3、R3↔R4（骨干接口自动分配 10.0.X.0/24）。
3. 路由表示例：
   - R1：`192.168.2.0` → R2，`10.2.0.0`、`10.1.0.0` → R3
   - R2：`192.168.1.0` → R1，`10.2.0.0`、`10.1.0.0` → R3
   - R3：`192.168.1.0` → R1，`192.168.2.0` → R2，`10.1.0.0` → R4
   - R4：其余三个网段全部指向 R3
4. DNS 写入 `www.companya.com → 10.2.0.10`、`www.search.com → 10.1.0.10`，Web1/Web2 填写对应域名和端口。
5. 用连通测试 (`192.168.1.10 → 10.2.0.10`) + 浏览器模拟器 (`http://www.search.com`) 进行验证，即可展示完整链路。

> 详细讲稿可在 `README.md` 或 `docs/教师教学指南.md` 的“从零搭建”章节找到，课堂上直接照步骤演示即可。

---

## 📂 作业查看

学生提交的作业保存在：
```
E:\备课\七年级上课\网络综合实验平台\submissions\
```

文件命名格式：
```
[IP地址]_[学生姓名]_[学号].json

例如：192.168.1.101_张三_01.json
```

### 查看学生作业

**方法1 - 批量批改（推荐）**：

1. 确保前端和后端服务都在运行
2. 在平台右上角点击"📊 批改作业"按钮
3. **输入密码验证**（密码保存在 `server.js` 第21行，默认：`teacher123`）
4. 验证通过后，左侧打开批改侧边栏
5. 系统自动扫描`submissions/`目录，列出所有班级和日期
6. 选择班级和日期（最新日期在前），点击"📥 加载作业"
7. **智能跳转**：系统自动跳转到第一个未批改的作业（支持中断续批）
8. 系统自动加载作业到画布，**可以直接在右侧画布测试学生作业**
9. 使用"上一个/下一个"按钮快速切换学生作业
10. 选择成绩等级（A+, A, A-, B+, B, B-, C+, C, C-）
11. 可选填写评语
12. 点击"✅ 保存成绩"自动跳到下一份
13. 批改完成后点击"📊 导出成绩表 (CSV)"
14. 点击侧边栏的"◀"按钮可以折叠面板，获得更多画布空间

**批改辅助开关**：
- 侧边栏“⚙️ 批改辅助工具”中可以勾选“快速动画模式”（DNS/HTTP动画提速）和“自动诊断写评语”
- 当自动诊断开启时，每次连通测试 / DNS / HTTP 测试都会把最新诊断写入评语框，老师可直接修改后保存
- 面板上方实时显示智能跳转到的学生及批改进度

**💡 智能续批功能**：
- 如果中途关闭批改界面，下次打开时会自动跳转到第一个未批改的作业
- 进度显示格式：`2/10 (2/10已批)` - 当前位置/总数 (已批数量/总数)
- 已批改的作业会显示绿色"✅ 已批改"标记和成绩

**方法2 - 导入单个作业查看**：
1. 在平台上点击"场景选择器" → "导入配置"
2. 选择学生的JSON文件
3. 系统自动加载学生的拓扑
4. 进行测试和评分

**方法3 - 用文本编辑器查看**：
- 打开 `submissions/` 文件夹
- 用VSCode或记事本打开JSON文件
- 查看学生信息和拓扑配置

---

## ❗ 常见问题

### Q1: 学生无法访问？

**检查清单**：
- [ ] 教师机和学生机在同一局域网
- [ ] 两个服务都已启动（前端 + 后端）
- [ ] 防火墙允许端口 5173 和 3001
- [ ] 学生输入的IP地址正确

**解决方案**：
```bash
# 查看教师机IP
ipconfig

# 检查防火墙（Windows）
控制面板 → Windows Defender防火墙 → 高级设置 → 入站规则
# 添加规则允许端口 5173 和 3001
```

### Q2: 如何查看或修改批改作业密码？

**查看密码**：

批改作业的密码保存在 `server.js` 文件中。

1. 使用文本编辑器（记事本、VSCode等）打开 `server.js`
2. 找到第 21 行：`const GRADING_PASSWORD = 'teacher123';`
3. 单引号中的 `teacher123` 就是默认密码

**修改密码**：

1. 打开 `server.js` 文件
2. 找到第 21 行
3. 将 `'teacher123'` 改为你想要的密码，例如 `'mypassword123'`
4. 保存文件
5. 重启后端服务（关闭后端窗口，重新运行 `一键启动.bat`）

```javascript
// 修改前
const GRADING_PASSWORD = 'teacher123';

// 修改后（示例）
const GRADING_PASSWORD = 'mypassword123';
```

> ⚠️ **重要提示**：修改密码后，必须重启后端服务才能生效！

### Q3: 作业提交失败？

**检查**：
- [ ] 后端服务（npm run server）是否正在运行
- [ ] 查看后端终端是否有错误提示

**备选方案**：
- 如果后端不可用，系统会自动触发本地下载
- 学生可以手动提交下载的JSON文件

### Q4: 端口被占用？

**错误信息**：`Error: listen EADDRINUSE: address already in use`

**解决**：
```bash
# Windows：停止所有Node进程
taskkill //F //IM node.exe

# 然后重新启动服务
npm run dev
npm run server
```

---

## 🎓 推荐教学流程

### 40分钟单元复习课

| 时间 | 活动 | 内容 |
|------|------|------|
| 0-5分钟 | 演示 | 教师演示平台使用，强调Shift+点击连接 |
| 5-25分钟 | 实践 | 学生搭建2-3个路由器的拓扑 |
| 25-35分钟 | 进阶 | 配置DNS和Web服务（选做） |
| 35-40分钟 | 总结 | 提交作业，展示优秀作品 |

### 80分钟综合实验课

| 时间 | 活动 | 内容 |
|------|------|------|
| 0-10分钟 | 讲解 | 讲解网络需求，画出拓扑图 |
| 10-30分钟 | 拓扑 | 添加设备、连接设备 |
| 30-50分钟 | 路由 | 配置路由表，测试连通性 |
| 50-65分钟 | 服务 | 配置DNS和Web服务 |
| 65-75分钟 | 测试 | 综合测试，修复错误 |
| 75-80分钟 | 总结 | 提交作业，课堂总结 |

---

## 📊 版本信息

- **当前版本**：v2.6.1
- **已完成功能**：
  - ✅ 路由器、路由表配置
  - ✅ DNS服务器、域名解析
  - ✅ Web服务器、HTTP模拟
  - ✅ 首次使用引导
  - ✅ 拓扑自动布局
  - ✅ 学生作业提交
  - ✅ 批量批改功能（v2.5）
  - ✅ 路由故障转移（v2.6）
  - ✅ 冗余路由自动切换（v2.6）
  - ✅ 接口管理器多设备显示（v2.6.1）
  - ✅ 智能骨干网复用（v2.6.1）

- **下一版本（v3.0）**：
  - ⏳ 自动评分系统

---

## 📞 技术支持

遇到问题请查看：
- [学生操作手册](docs/学生操作手册.md)
- [教师教学指南](docs/教师教学指南.md)
- [README.md](README.md)

---

**祝教学顺利！** 🎓

七年级信息科技 · 网络综合实验平台
